## ЁЯза Inheritance ржПрж░ Drawback ржПржмржВ тАЬBanana-Gorilla ProblemтАЭ Explained

### ЁЯжЖ ржХрзНрж▓рж╛рж╕: Duck

ржзрж░рж╛ ржпрж╛ржХ ржЖржорж╛ржжрзЗрж░ ржПржХржЯрж┐ ржЕржмржЬрзЗржХрзНржЯ ржЖржЫрзЗ тАФ **Duck**ред  
ржПржЗ Duck ржЕржмржЬрзЗржХрзНржЯ ржХрж┐ржЫрзБ ржХрж╛ржЬ ржХрж░рждрзЗ ржкрж╛рж░рзЗ тАФ ржпрзЗржоржи:

- **Swim()**
    
- **Fly()**
    
- **Eat()**
    
```cs
public class Duck {
	public void Swim() {
		// Swimming logic
	}
	public void Fly() {
		// Flying logic
	}
	public void Eat() {
		// Eating logic
	}
}
```

### ЁЯжЕ ржХрзНрж▓рж╛рж╕: Eagle

ржЖржмрж╛рж░ ржзрж░рзЛ **Eagle** ржирж╛ржорзЗрж░ ржЖрж░рзЗржХржЯрж╛ ржЕржмржЬрзЗржХрзНржЯ ржЖржЫрзЗ, ржпрж╛:

- **Fly()** ржХрж░рждрзЗ ржкрж╛рж░рзЗ
    
- **Eat()** ржХрж░рждрзЗ ржкрж╛рж░рзЗ
    
- ржХрж┐ржирзНрждрзБ **Swim()** ржХрж░рждрзЗ ржкрж╛рж░рзЗ ржирж╛
    
```cs
public class Eagle {
	public void Fly() {
		// Flying logic
	}
	public void Eat() {
		// Eating logic
	}
}
```

---

### тЬЕ Code Reusability-ржПрж░ ржЬржирзНржп Inheritance

Eagle ржПржмржВ Duck ржЙржнрзЯрзЗржЗ `Fly()` ржУ `Eat()` ржХрж░рждрзЗ ржкрж╛рж░рзЗред ржПржЗ ржХржоржи ржХрзЛржб ржмрж╛рж░ржмрж╛рж░ ржирж╛ рж▓рж┐ржЦрзЗ ржЖржорж░рж╛ ржПржХржЯрж┐ **abstract base class** тАФ `Flyable` рждрзИрж░рж┐ ржХрж░рждрзЗ ржкрж╛рж░рж┐ред
```cs
public abstract class Flyable {
	public void Fly() {
		// Flying logic
	}
	public void Eat() {
		// Eating logic
	}
}

```

```cs
public class Duck : Flyable {
	public void Swim() {
		// Swimming logic
	}
}

public class Eagle : Flyable {
	// No need to rewrite Fly() or Eat()
}
```

ржПржнрж╛ржмрзЗ ржЖржорж░рж╛ inheritance ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржХрзЛржб рж░рж┐ржЗржЙржЬ ржХрж░рждрзЗ ржкрж╛рж░рж┐ред

---

## тЭМ ржХрж┐ржирзНрждрзБ рж╕ржорж╕рзНржпрж╛ рждржЦржиржЗ рж╢рзБрж░рзБ рж╣рзЯ...

ржзрж░рзЛ рждрзБржорж┐ ржПржХржЯрж┐ **Plane** ржЕржмржЬрзЗржХрзНржЯ ржмрж╛ржирж╛рж▓рзЗ, ржпрзЗржЯрж╛ **Fly()** ржХрж░рждрзЗ ржкрж╛рж░рзЗ, ржХрж┐ржирзНрждрзБ **Eat()** ржХрж░рж╛рж░ ржХрзЛржирзЛ ржжрж░ржХрж╛рж░ ржирзЗржЗред


### тЪая╕П ржХрж┐ржирзНрждрзБ ржПржЦржи `Plane` ржХрзНрж▓рж╛рж╕рзЗ `Eat()` ржУ ржврзБржХрзЗ ржкрзЬрж▓ тАФ ржпрж╛ Plane-ржПрж░ ржжрж░ржХрж╛рж░ржЗ ржирзЗржЗ!

ржПржЯрж╛ржЗ Inheritance-ржПрж░ **Unwanted Inheritance Problem** тАФ ржЖрж░ ржПржХрзЗржЗ ржоржЬрж╛ ржХрж░рзЗ ржмрж▓рж╛ рж╣рзЯ:

> 			**"You wanted a banana, but what you got was a gorilla holding the banana... and the entire jungle."**   тАФ _Joe Armstrong (Creator of Erlang)_


```cs
public class Plane {
	public void Fly() {
		// Flying logic
	}
}
```

```cs
public class Plane : Flyable {
	// Reusing fly logic
}
```
---

ЁЯУМ ржЕрж░рзНржерж╛рзО ржЖржкржирж┐ рж╢рзБржзрзБ **fly()** ржЪрзЗрзЯрзЗржЫрж┐рж▓рзЗржи, ржХрж┐ржирзНрждрзБ ржкрзЗрзЯрзЗ ржЧрзЗржЫрзЗржи **eat()** рж╕рж╣ ржкрзБрж░рзЛ `Flyable` ржХрзНрж▓рж╛рж╕ тАФ ржпрж╛ **encapsulation** ржирзАрждрж┐рж░ржУ рж▓ржЩрзНржШржиред

---

## ЁЯОп рж╕ржорж╛ржзрж╛ржи: Composition

Instead of extending `Flyable`, ржЖржорж░рж╛ `Flyable` ржХрзЗ **ржПржХржЯрж┐ ржнрж┐ржирзНржи ржХрзНрж▓рж╛рж╕** рж╣рж┐рж╕рзЗржмрзЗ рж░рзЗржЦрзЗ, Plane ржХрзНрж▓рж╛рж╕рзЗ рж╕рзЗржЯрж╛ **ржХржорзНржкрзЛржЬ** ржХрж░рзЗ ржирж┐ржЗ:
```cs
public class FlyableBehavior {
	public void Fly() {
		// Flying logic
	}
}
```

```cs
public class Plane {
	private FlyableBehavior _flyable;

	public Plane(FlyableBehavior flyable) {
		_flyable = flyable;
	}

	public void Fly() {
		_flyable.Fly();
	}
}
```

ржПржнрж╛ржмрзЗ, ржХрзНрж▓рж╛ржпрж╝рзЗржирзНржЯ рж╢рзБржзрзБ **fly()** ржжрзЗржЦрждрзЗ ржкрж╛ржмрзЗ, eat() ржиржпрж╝ тАФ ржХрж╛рж░ржг ржЖржкржирж┐ ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░ржЫрзЗржи ржХрзЛржи ржлрж╛ржВрж╢ржи ржПржХрзНрж╕ржкрзЛржЬржб рж╣ржмрзЗред

ржЖрж░ржУ ржмржбрж╝ ржПржХржЯрж╛ рж╕рзБржмрж┐ржзрж╛ рж╣ржЪрзНржЫрзЗ тАФ **composition ржмрзНржпржмрж╣рж╛рж░рзЗ ржЖржкржирж┐ runtime ржП ржмрж┐рж╣рзЗржнрж┐ржпрж╝рж╛рж░ ржЪрзЗржЮрзНржЬ ржХрж░рждрзЗ ржкрж╛рж░рзЗржи,**  
ржХрж╛рж░ржг flyable ржЕржмржЬрзЗржХрзНржЯржЯрж╛ржХрзЗ ржЖржкржирж┐ ржХржирж╕рзНржЯрзНрж░рж╛ржХрзНржЯрж░ ржжрж┐ржпрж╝рзЗ ржЗржиржЬрзЗржХрзНржЯ ржХрж░рждрзЗ ржкрж╛рж░рзЗржи тАФ ржпрзЗржЯрж╛ржХрзЗ ржмрж▓рзЗ dependency injectionред

ржХрж┐ржирзНрждрзБ  `Inheritance`-ржП ржЕржмржЬрзЗржХрзНржЯ рж░рж┐рж▓рзЗрж╢ржи ржЖржЧрзЗ ржерзЗржХрзЗржЗ **compile time**-ржП рж╕рзНржерж┐рж░ ржерж╛ржХрзЗред **runtime**-ржП ржЖржкржирж┐ ржХрж┐ржЫрзБ **ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рждрзЗ ржкрж╛рж░рзЗржи ржирж╛ред**

---

## тЬЕ рждрж╛ржЗ ржХрзЗржи Composition ржмрзЗрж╢рж┐ ржнрж╛рж▓рзЛ?

|ржмрж┐рж╖рзЯ|Inheritance|Composition|
|---|---|---|
|Flexibility|ржХржо, compile-time ржП fixed|ржмрзЗрж╢рж┐, runtime ржП behavior ржмржжрж▓рж╛ржирзЛ ржпрж╛рзЯ|
|Overhead|ржЕржмрж╛ржЮрзНржЫрж┐ржд method ржУ properties ржкрзЗрзЯрзЗ ржпрж╛ржУрзЯрж╛ рж╕ржорзНржнржм|ржЖржкржирж┐ ржпрж╛ ржЪрж╛ржи, рж╢рзБржзрзБ рждрж╛ржЗ ржкрж╛ржмрзЗржи|
|Encapsulation|ржжрзБрж░рзНржмрж▓ рж╣рзЯ|ржмржЬрж╛рзЯ ржерж╛ржХрзЗ|
|Reusability|tight coupling рждрзИрж░рж┐ ржХрж░рзЗ|loose coupling рж░рж╛ржЦрзЗ|

---

## ЁЯУМ ржПржХржЯрж┐ рж╕рж╣ржЬ guideline ржоржирзЗ рж░рж╛ржЦрзЛ:

- ржпржжрж┐ рж╕ржорзНржкрж░рзНржХ рж╣рзЯ тЖТ `A is a B` тЖТ **Use Inheritance**  
    ржЙржжрж╛рж╣рж░ржг: Cat is an Animal
    
- ржпржжрж┐ рж╕ржорзНржкрж░рзНржХ рж╣рзЯ тЖТ `A has a B` тЖТ **Use Composition**  
    ржЙржжрж╛рж╣рж░ржг: Computer has a Processor
    

ржХрж┐ржирзНрждрзБ ржпржжрж┐ ржжрзНржмрж┐ржзрж╛ ржерж╛ржХрзЗ тАФ ржпрзЗржоржи `Plane is a Flyable` vs `Plane has a Flyable behavior` тАФ  
**рждржЦржи composition-ржЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЛ**, ржХрж╛рж░ржг ржПржЯрж╛ ржирж┐рж░рж╛ржкржж, maintainable ржПржмржВ flexibleред

---
## ЁЯПБ рж╢рзЗрж╖ ржХржерж╛:

> тЬЕ **Prefer composition over inheritance.**  
> ржХрж╛рж░ржг Composition ржЖржкржирж╛ржХрзЗ рж╢рзБржзрзБ ржпрж╛ ржжрж░ржХрж╛рж░, ржарж┐ржХ рждрж╛-ржЗ ржжрзЗрзЯ тАФ ржХрзЛржирзЛ ржЕрждрж┐рж░рж┐ржХрзНржд baggage ржирзЯред


